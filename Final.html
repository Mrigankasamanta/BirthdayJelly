<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Card for Jelly</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ============ ‡ßß. ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ï‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ============ */
        #cardLock {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 320px;
            height: 450px;
            background: rgba(0, 0, 0, 0.85);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            text-align: center;
            color: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        #lockedCardArea {
            filter: blur(8px);
            pointer-events: none;
            transition: filter 0.5s ease;
        }

        /* ============ ‡ß®. ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶π‡ßá‡¶°‡¶æ‡¶∞/‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ ‡¶ì ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶¨‡¶°‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (UPDATED) ============ */
        .wishes {
            /* ‡¶™‡ßÅ‡¶∞‡ßã ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ü‡¶æ‡¶ï‡ßá ‡¶´‡ßç‡¶≤‡ßá‡¶ï‡ßç‡¶∏‡¶¨‡¶ï‡ßç‡¶∏ ‡¶¨‡¶æ‡¶®‡¶æ‡¶≤‡¶æ‡¶Æ */
            display: flex;
            flex-direction: column;
            height: 220px; /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶ü‡ßÅ‡¶ï‡ßÅ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° */
            font-size: 14px;
        }

        /* ‡¶â‡¶™‡¶∞‡ßá‡¶∞ Dear Jelly ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
        .wishes-header {
            font-weight: bold;
            margin-bottom: 8px;
            flex-shrink: 0; /* ‡¶è‡¶ü‡¶æ ‡¶ï‡¶ñ‡¶®‡ßã ‡¶õ‡ßã‡¶ü ‡¶π‡¶¨‡ßá ‡¶®‡¶æ */
        }

        /* ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶π‡¶¨‡ßá */
        .wishes-body {
            flex-grow: 1; /* ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡¶¨ ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶®‡ßá‡¶¨‡ßá */
            overflow-y: auto; /* ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶≤‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶π‡¶¨‡ßá */
            padding-right: 5px;
            text-align: justify;
            line-height: 1.4;
            margin-bottom: 5px;
        }

        /* ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
        .wishes-footer {
            font-weight: bold;
            color: #d81b60;
            text-align: right;
            margin-top: 5px;
            flex-shrink: 0; /* ‡¶è‡¶ü‡¶æ ‡¶ï‡¶ñ‡¶®‡ßã ‡¶õ‡ßã‡¶ü ‡¶π‡¶¨‡ßá ‡¶®‡¶æ */
        }

        /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .wishes-body::-webkit-scrollbar {
            width: 4px;
        }
        .wishes-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .wishes-body::-webkit-scrollbar-thumb {
            background: #ff4081;
            border-radius: 10px;
        }
    </style>
</head>

<body>

    <audio id="bgMusic" loop>
        <source src="song4.mp3" type="audio/mpeg">
    </audio>

    <img src="ZUiY.gif" alt="stars" class="star">
    <img src="5l03.gif" alt="ballon" class="ballon">

    <div class="container" style="position: relative;">

        <div id="cardLock">
            <h1 style="font-size: 40px; margin: 0;">üîí</h1>
            <h2 style="color: #ff4081; font-family: sans-serif; margin: 10px 0;">Secret Message</h2>
            <p style="font-size: 14px; margin-bottom: 20px; padding: 0 20px;">This card is locked for Jelly only.</p>

            <input type="password" id="cardPassInput" placeholder="Password"
                style="padding: 8px; border-radius: 5px; border: none; margin-bottom: 10px; text-align: center; width: 70%;">

            <button onclick="unlockSecretCard()"
                style="padding: 8px 20px; background: #ff4081; color: white; border: none; border-radius: 50px; cursor: pointer;">
                Unlock
            </button>
            <p id="lockError" style="color: red; font-size: 12px; margin-top: 10px; display: none;">Wrong Password!</p>
        </div>

        <div id="lockedCardArea">
            <div class="birthdayCard">
                <div class="cardFront">
                    <div class="front-text">
                        <h3 class="happy">HAPPY</h3>
                        <h2 class="bday">BIRTHDAY</h2>
                        <h3 class="toyou">to you Jelly!</h3>
                    </div>
                    <div class="wrap-deco">
                        <div class="decorations"></div>
                        <div class="decorationsTwo"></div>
                    </div>
                    <div class="wrap-decoTwo">
                        <div class="decorations"></div>
                        <div class="decorationsThree"></div>
                    </div>
                    <div class="plate">
                        <div class="cake"></div>
                        <div class="flame"></div>
                    </div>
                </div>
                <div class="cardInside">
                    <div class="img">
                        <img src="penguin.jpg" alt="Brotherpic" class="bdyboy">
                        <img src="6ob.gif" alt="confetti" class="confetti">
                    </div>
                    <div class="inside-text">
                        <h3 class="happy">HAPPY</h3>
                        <h2 class="bday">BIRTHDAY</h2>
                        <h3 class="toyou">to you Janu</h3>
                    </div>
                    
                    <div class="wishes">
                        <div class="wishes-header">Dear Jelly,</div>
                        
                        <div class="wishes-body">
                            <p>Happy Birthday! üéâ Today you officially get one year cooler (and a little crazier üòú). May
                                your cake be huge, your gifts be expensive, and your life be full of love, laughter & zero
                                stress! Enjoy your special day!</p>
                            <br>
                            <p>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¶‡¶ø‡¶®‡¶ü‡¶æ ‡¶§‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤, ‡¶§‡¶æ‡¶á ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßú ‡¶ï‡¶∞‡ßá ‡¶≤‡¶ø‡¶ñ‡¶õ‡¶ø‡•§ ‡¶§‡ßÅ‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶ó‡¶ø‡¶´‡¶ü‡•§ 
                            ‡¶∏‡¶æ‡¶∞‡¶æ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶è‡¶≠‡¶æ‡¶¨‡ßá‡¶á ‡¶™‡¶æ‡¶∂‡ßá ‡¶•‡¶æ‡¶ï‡¶ø‡¶∏, ‡¶Ü‡¶∞ ‡¶è‡¶≠‡¶æ‡¶¨‡ßá‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶•‡¶æ ‡¶ñ‡ßá‡ßü‡ßá ‡¶Ø‡¶æ‡¶∏! üòÜ</p>
                            <br>
                            <p>‡¶Ü‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, ‡¶è‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶∞ ‡¶ù‡¶ó‡¶°‡¶º‡¶æ ‡¶ï‡¶∞‡¶¨‡¶ø ‡¶®‡¶æ! üòõ ‡¶è‡¶á ‡¶¨‡¶õ‡¶∞‡ßá‡¶∞ birthday ‡¶ü‡¶æ ‡¶Ü‡¶Æ‡¶ø ‡¶≠‡¶æ‡¶≤‡ßã ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ, ‡¶∂‡ßÅ‡¶ß‡ßÅ
                                ‡¶π‡¶æ‡¶∏‡¶ø‡¶∏ ‡¶Ü‡¶∞ enjoy ‡¶ï‡¶∞‡¶ø‡¶∏! ‡¶Ö‡¶®‡ßá‡¶ï ‡¶Ö‡¶®‡ßá‡¶ï ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ ‡¶§‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§</p>
                            <br>
                            <p>‡¶§‡ßÅ‡¶á ‡¶≠‡¶æ‡¶≤‡ßã ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶ø‡¶ì ‡¶≠‡¶æ‡¶≤‡ßã ‡¶•‡¶æ‡¶ï‡¶ø‡•§ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶ñ‡ßá‡ßü‡¶æ‡¶≤ ‡¶∞‡¶æ‡¶ñ‡¶ø‡¶∏‡•§ ‡¶≤‡¶æ‡¶≠ ‡¶á‡¶â! ‚ù§Ô∏è</p>
                            <br>
                            <p>I Love You So Much.‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ó‡¶≤‡¶ø ‡¶ó‡¶∞‡ßÅ‡¶ü‡¶æ ‡¶§‡ßã‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶æ‡¶∞‡¶æ‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶ù‡¶ó‡¶°‡¶º‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶π‡ßá‡¶¨‡ßç‡¶¨‡¶ø ‡¶≤‡¶æ‡¶ó‡ßá . I love you üòò!</p>
                        </div>
                        
                        <div class="wishes-footer">~ Your Motu‚ù§Ô∏è</div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    <img src="4SHX.gif" alt="cat" class="cat">

    <section class="folder" aria-label="Photo folder">
        <div id="trainArea" class="train-wrapper" role="region" aria-label="Photo train">
            <div id="trainStack" aria-hidden="false"></div>
            <button id="trainPrev" class="train-nav train-prev" aria-label="Previous">&#10094;</button>
            <button id="trainNext" class="train-nav train-next" aria-label="Next">&#10095;</button>
        </div>
        <div id="trainBelowCaption" class="stack-caption" aria-hidden="true" style="display:none;">&nbsp;</div>
    </section>

    <div class="wish-container">
        <h2 class="wish-title">Leave a Wish for Jelly! üíå</h2>
        <div class="input-group">
            <input type="text" id="wisherName" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (Your Name)">
            <textarea id="wisherMessage" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶â‡¶á‡¶∂ ‡¶≤‡ßá‡¶ñ‡ßã... (Write your wish)"></textarea>
            <button onclick="sendWish()">Send Wish üöÄ</button>
        </div>
        <div id="messagesArea" class="messages-list"></div>
    </div>

    <div id="imageLightbox" class="lightbox-modal">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightboxImg">
    </div>

    <script type="module">
        // ==========================================
        // 1. CARD UNLOCK LOGIC
        // ==========================================
        window.unlockSecretCard = function () {
            const input = document.getElementById('cardPassInput').value;
            const lockScreen = document.getElementById('cardLock');
            const cardArea = document.getElementById('lockedCardArea');
            const errorMsg = document.getElementById('lockError');

            const correctPassword = "851420";

            if (input === correctPassword) {
                lockScreen.style.display = 'none';
                cardArea.style.filter = 'none';
                cardArea.style.pointerEvents = 'auto';
            } else {
                errorMsg.style.display = 'block';
            }
        }

        // ==========================================
        // 2. FIREBASE CONFIGURATION
        // ==========================================
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onChildAdded, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD9IMQ-_ZLHwPhWORBvrREGcwJ5ddg7y7M",
            authDomain: "jellybirthday-e04c8.firebaseapp.com",
            databaseURL: "https://jellybirthday-e04c8-default-rtdb.firebaseio.com",
            projectId: "jellybirthday-e04c8",
            storageBucket: "jellybirthday-e04c8.firebasestorage.app",
            messagingSenderId: "567315973038",
            appId: "1:567315973038:web:e0e64df2ccd05db0547e3f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const messagesRef = ref(db, 'wishes');

        window.sendWish = function () {
            const name = document.getElementById('wisherName').value;
            const msg = document.getElementById('wisherMessage').value;

            if (name.trim() === "" || msg.trim() === "") {
                alert("Please enter both name and message!");
                return;
            }

            push(messagesRef, {
                name: name,
                message: msg,
                reply: ""
            }).then(() => {
                document.getElementById('wisherMessage').value = "";
                alert("Wish Sent Successfully! ‚ù§Ô∏è");
            }).catch((error) => {
                alert("Error sending wish: " + error.message);
            });
        }

        onChildAdded(messagesRef, (snapshot) => {
            const data = snapshot.val();
            const key = snapshot.key;
            addMessageToUI(key, data.name, data.message, data.reply);
        });

        function addMessageToUI(key, name, msg, reply) {
            const list = document.getElementById('messagesArea');
            const div = document.createElement('div');
            div.className = 'message-card';
            div.id = `msg-${key}`;

            let replyHtml = reply ? `<div class="reply-text"><strong>Reply:</strong> ${reply}</div>` : '';

            div.innerHTML = `
                <div class="msg-name">${name} wrote:</div>
                <div class="msg-text">${msg}</div>
                <div id="reply-box-${key}">${replyHtml}</div>
                <button class="admin-reply-btn" onclick="adminReply('${key}')">Reply</button>
            `;
            list.insertBefore(div, list.firstChild);
        }

        window.adminReply = function (key) {
            const pass = prompt("Enter Admin Password to Reply:");
            if (pass === "851420") {
                const replyText = prompt("Type your reply:");
                if (replyText) {
                    const updates = {};
                    updates['/wishes/' + key + '/reply'] = replyText;
                    update(ref(db), updates);
                    document.getElementById(`reply-box-${key}`).innerHTML = `<div class="reply-text"><strong>Reply:</strong> ${replyText}</div>`;
                }
            } else {
                alert("Wrong Password! You cannot reply.");
            }
        }

        // ==========================================
        // 3. MUSIC ON CLICK
        // ==========================================
        document.addEventListener('click', function () {
            const bgMusic = document.getElementById('bgMusic');
            if (bgMusic.paused) {
                bgMusic.play().then(() => {
                    console.log("Music started!");
                }).catch(e => {
                    console.log("Audio play failed:", e);
                });
            }
        }, { once: true });

        // ==========================================
        // 4. GALLERY & CAPTION LOGIC
        // ==========================================
        const imageCount = 33;
        const imgFolder = 'images';

        const customCaptions = [
            "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡ßá‡¶á ‡¶ó‡¶æ‡¶°‡¶º‡¶ø‡¶§‡ßá ‡¶ï‡¶∞‡ßá ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ üòÑ",
            "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡ßá‡¶á ‡¶™‡¶°‡¶º‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶°‡¶º‡¶ø ‡¶´‡ßá‡¶∞‡¶æ‡¶∞‡¶™‡¶•‡ßá ‡¶∏‡ßç‡¶ï‡ßÅ‡¶≤‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ ‡¶§‡¶æ‡¶á ‡¶∏‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶≤‡¶æ‡¶Æ üòÜ",
            "‡¶¶‡ßÅ‡¶ú‡¶®‡ßá‡¶∞ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ï‡¶¶‡ßç‡¶¨‡ßÄ‡¶™‡ßá ‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶†‡¶æ‡¶ï‡ßÅ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ üòä",
            "‡¶è‡¶á ‡¶∏‡ßá‡¶á ‡¶¶‡¶ø‡¶® ‡¶Ø‡ßá‡¶¶‡¶ø‡¶® ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ö‡¶∂‡¶Æ‡¶æ ‡¶π‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá‡¶õ‡¶ø‡¶≤ üòÖ",
            "‡¶Ö‡¶∂‡ßã‡¶ï ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶§‡ßá ‡¶¶‡ßÅ‡¶ú‡¶®‡ßá‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶ï‡¶∞‡¶æ üòú",
            "‡¶ü‡¶ø‡¶â‡¶∂‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶´‡ßá‡¶∞‡¶æ‡¶∞ ‡¶™‡¶•‡ßá ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶æ üòÅ",
            "‡¶∏‡ßç‡¶ï‡ßÅ‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡¶æ‡¶®‡¶æ ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶Ü‡¶∏‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶æ üòÇ",
            "‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶Ü‡¶∏‡ßá‡¶®‡¶ø ‡¶¨‡¶≤‡ßá ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ üòÜ",
            "‡¶Ö‡¶®‡ßá‡¶ï ‡¶Æ‡¶æ‡¶∞‡¶æ‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶ù‡¶ó‡¶°‡¶º‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶∂‡ßá‡¶∑‡ßá ‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶™‡ßÅ‡¶ú‡ßã‡¶§‡ßá ‡¶ò‡ßÅ‡¶∞‡¶§‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ 8no ‡¶è ü§ó",
            "‡¶â‡¶ö‡ßç‡¶ö‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡¶ø‡¶ï ‡¶∂‡ßá‡¶∑ ‡¶§‡ßã ‡¶∏‡ßá‡¶á‡¶¶‡¶ø‡¶®‡¶á ‡¶ö‡¶≤‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ 8no ‡¶è ‡¶ò‡ßÅ‡¶∞‡¶§‡ßá üòÉ",
            "‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶∏‡ßá‡¶á ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® ‡¶™‡¶æ‡¶≤‡¶® ‡¶Ø‡ßá‡¶ü‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ Jelly ‡¶™‡¶æ‡¶≤‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡¶≤ ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶ì‡¶ñ‡¶æ‡¶®‡ßá ‚ò∫Ô∏è",
            "‡¶¶‡ßÅ‡¶ú‡¶®‡ßá‡¶∞ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶á‡¶ï‡ßá‡¶≤ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶∏‡ßá‡¶á ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶â‡¶´‡ßç ‡¶ï‡¶ø ‡¶¶‡¶ø‡¶® ü•π",
            "‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶∞‡ßá‡¶∏‡ßç‡¶ü‡ßÅ‡¶∞‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ ‡¶¶‡ßÅ‡¶ú‡¶®‡ßá ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ü•∞",
            "‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ó‡¶≤‡ßÄ‡¶ü‡¶æ‡¶∞ ‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º‡¶¨‡¶æ‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡ßã‡¶® ‡¶è‡¶≤‡ßã ‡¶Ü‡¶Æ‡¶ø unboxing ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ üòÅ",
            "‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ó‡¶∞‡ßÅ‡¶ü‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶è‡¶∏‡ßá ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßá‡¶∏ ‡¶¨‡¶æ ‡¶ò‡¶∞ ‡¶ñ‡ßã‡¶ú‡¶æ ü•≥",
            "‡ß®‡ß¶‡ß®‡ß© ‡¶è ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶ò‡ßÅ‡¶∞‡¶§‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ‡¶Ø‡¶º ü§ó",
            "‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶∞‡¶¨‡ßÄ‡¶®‡ßç‡¶¶‡ßç‡¶∞ ‡¶∏‡¶∞‡ßã‡¶¨‡¶∞ ‡¶è ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ ‡¶ò‡ßÅ‡¶∞‡¶§‡ßá üòå",
            "‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶™‡¶æ‡¶ü‡ßÅ‡¶≤‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶æ‡¶≤ üòÆ‚Äçüí® ‡¶è‡¶ü‡¶æ ‡¶õ‡¶ø‡¶≤ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ü‡ßÅ‡¶≤‡ßÄ‡¶§‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ üòÑ",
            "‡¶¶‡ßÅ‡¶ú‡¶®‡ßá ‡¶Æ‡¶ø‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ï‡ßç‡¶∑‡¶ø‡¶£‡ßá‡¶∂‡ßç‡¶¨‡¶∞ ‡¶è ‡¶Æ‡¶æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶™‡ßÇ‡¶ú‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ üôè",
            "‡¶¶‡ßÅ‡¶ú‡¶®‡ßá‡¶∞ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡ß®‡ß¶‡ß®‡ß© ‡¶è ‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶™‡ßÅ‡¶ú‡ßã‡¶§‡ßá ‡¶ò‡ßÅ‡¶∞‡¶æ ‡¶ï‡ßÅ‡¶≤‡¶™‡¶ø‡¶§‡ßá ü§´",
            "‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ó‡¶≤‡ßÄ‡¶ü‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡¶≤‡¶æ‡¶∞‡¶∂‡¶ø‡¶™ reject ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶¶‡ßÅ‡¶ú‡¶®‡ßá ‡¶∏‡ßá‡¶á ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ Swasthya Bhawan ‡¶è üòâ",
            "‡¶™‡¶æ‡¶ó‡¶≤‡ßÄ ‡¶ï‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ò‡ßÅ‡¶∞‡¶§‡ßá ‡¶ó‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ ‡¶¨‡¶ï‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶§‡ßá ‡¶∏‡ßá‡¶á‡¶¶‡¶ø‡¶® ‡¶ï‡¶§ ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶≤‡¶æ‡¶Æ ü§´",
            "‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶™‡ßà‡¶≤‡¶æ‡¶® ‡¶Æ‡¶®‡ßç‡¶¶‡¶ø‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶≤‡¶æ‡¶Æ ‡¶Ü‡¶∞ ‡¶ò‡ßÅ‡¶∞‡¶≤‡¶æ‡¶Æ ‡¶´‡¶ü‡ßã ‡¶§‡ßÅ‡¶≤‡¶≤‡¶æ‡¶Æ üôè",
            "‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶∞‡¶¨‡ßÄ‡¶®‡ßç‡¶¶‡ßç‡¶∞ ‡¶∏‡¶∞‡ßã‡¶¨‡¶∞‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶è‡¶á‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶¨‡¶æ‡¶á ‡¶Æ‡¶ø‡¶≤‡ßá ‡¶∏‡ßÅ‡¶ï‡ßÅ, ‡¶™‡ßç‡¶∞‡ßÄ‡¶§‡¶Æ, ‡¶Ü‡¶Æ‡¶ø , ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ó‡¶∞‡ßÅ , ‡¶∞‡¶æ‡¶π‡ßÅ‡¶≤ ‡¶Ü‡¶∞ ‡¶ú‡¶Ø‡¶º‡¶∂‡ßç‡¶∞‡ßÄ üòÑ",
            "‡ß®‡ß¶‡ß®‡ß™ ‡¶è ‡¶Ü‡¶Æ‡¶æ‡¶∞ Jelly-‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶ô‡ßç‡¶ó‡ßá ‡¶∏‡ßÅ‡¶ï‡ßÅ ‡¶Ü‡¶∞ ‡¶™‡ßç‡¶∞‡ßÄ‡¶§‡¶Æ‡¶ì ‡¶õ‡¶ø‡¶≤ ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶†‡¶æ‡¶ï‡ßÅ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ ü§´",
            "‡ß®‡ß¶‡ß®‡ß™ ‡¶è‡¶á ‡¶¶‡ßÅ‡¶ú‡¶® ‡¶Æ‡¶ø‡¶≤‡ßá ‡¶≤‡¶æ‡¶≤ ‡¶§‡ßÅ‡¶á ‡¶≤‡¶æ‡¶≤ ‡¶∂‡¶æ‡¶°‡¶º‡¶ø ‡¶Ü‡¶∞ ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶∏‡ßá‡¶á ‡¶≤‡¶æ‡¶≤ ‡¶™‡¶æ‡¶û‡ßç‡¶ú‡¶æ‡¶¨‡¶ø ‡¶™‡¶°‡¶º‡ßá ‡¶ò‡ßÅ‡¶∞‡¶≤‡¶æ‡¶Æ ü•∞",
            "‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ó‡¶∞‡ßÅ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶® ‡¶™‡¶æ‡¶≤‡¶® ‡¶ï‡¶∞‡¶≤‡ßã üòò",
            "‡¶¶‡¶ø‡¶ò‡¶æ‡¶§‡ßá ‡¶ò‡ßÅ‡¶∞‡¶§‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶ñ‡ßÅ‡¶¨ ‡¶Æ‡¶ú‡¶æ ‡¶ï‡¶∞‡¶≤‡¶æ‡¶Æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ó‡¶≤‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶ó‡¶æ‡¶°‡¶º‡¶ø‡¶§‡ßá ‡¶¨‡¶∏‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ üòç",
            "‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶ú‡ßã‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶á ‡¶≠‡¶æ‡¶∞‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ó‡¶ü‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶™‡ßÇ‡¶ú‡¶æ‡¶Ø‡¶º ‡¶ò‡ßÅ‡¶∞‡¶æ‡¶≤‡ßã ‡ß®‡ß¶‡ß®‡ß´ ‡¶è üòÆ‚Äçüí®",
            "‡¶¶‡ßÅ‡¶ú‡¶®‡ßá 3‡¶¶‡¶ø‡¶® ‡¶ò‡ßÅ‡¶∞‡¶≤‡¶æ‡¶Æ ‡¶ï‡¶≤‡¶ï‡¶æ‡¶§‡¶æ‡¶Ø‡¶º ‡¶è‡¶ü‡¶æ ‡¶§‡ßÉ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶´‡¶ü‡ßã ‡¶Æ‡¶ú‡¶æ ‡¶è‡¶∏‡ßá‡¶õ‡¶ø‡¶≤ ‡¶ò‡ßÅ‡¶∞‡ßá ü•∞",
            "‡ß®‡ß¶‡ß®‡ß´ ‡¶è ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∏‡¶¨‡¶æ‡¶á ‡¶Æ‡¶ø‡¶≤‡ßá ‡¶ï‡ßÅ‡¶≤‡ßç‡¶™‡¶ø‡¶§‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ ü§´",
            "‡ß®‡ß¶‡ß®‡ß´ ‡¶è‡¶∞ ‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶™‡ßÇ‡¶ú‡¶æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑ ‡¶¶‡¶ø‡¶® ‡¶Æ‡¶æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶¶‡¶∞‡ßç‡¶∂‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶ó‡ßá‡¶≤‡¶æ‡¶Æ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶°‡¶æ‡¶Æ ‡¶∞‡ßá‡¶ó‡ßá ‡¶ï‡¶æ‡¶Æ‡¶® ‡¶Æ‡ßÅ‡¶ñ ‡¶¨‡¶æ‡¶ï‡¶æ‡¶≤‡ßã üòí",
            "‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¶‡ßÅ‡¶ú‡¶®‡ßá‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶§‡¶æ‡¶ï‡¶ø‡¶Ø‡¶º‡ßá ‡¶≠‡¶æ‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶æ ‡¶´‡¶ü‡ßã ‡¶§‡ßã‡¶≤‡¶æ‡¶∞ ‡¶â‡¶¶‡ßç‡¶Ø‡ßá‡¶∂‡ßá ü§≠"
        ];

        const captions = Array.from({ length: imageCount }, (_, i) => customCaptions[i] || `‡¶∏‡ßç‡¶Æ‡ßÉ‡¶§‡¶ø ${i + 1}`);

        const trainStack = document.getElementById('trainStack');
        const trainArea = document.getElementById('trainArea');
        const lightbox = document.getElementById('imageLightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxClose = document.querySelector('.lightbox-close');

        const cards = [];
        for (let i = 1; i <= imageCount; i++) {
            const num = String(i).padStart(2, '0');
            const src = `${imgFolder}/photo${num}.jpg`;
            const card = document.createElement('div');
            card.className = 'stack-card';
            card.dataset.index = i - 1;
            const img = document.createElement('img');
            img.src = src;
            img.alt = captions[i - 1] || `photo ${i}`;
            const cap = document.createElement('div');
            cap.className = 'stack-caption';
            cap.textContent = captions[i - 1] || '';
            card.appendChild(img);
            card.appendChild(cap);
            trainStack.appendChild(card);
            cards.push(card);

            card.addEventListener('click', () => {
                if (card.classList.contains('top')) {
                    stopCycle();
                    lightboxImg.src = img.src;
                    lightbox.style.display = 'flex';
                }
            });
        }

        let current = 0;
        function applyStackClasses(activeIndex) {
            for (let i = 0; i < cards.length; i++) {
                const card = cards[i];
                card.classList.remove('top', 'below', 'deep', 'flip-up', 'flip-initial', 'flip-in', 'flip-down', 'flip-in-rev');
                const rel = (i - activeIndex + cards.length) % cards.length;
                if (rel === 0) { card.classList.add('top'); card.style.zIndex = 30; }
                else if (rel === 1) { card.classList.add('below'); card.style.zIndex = 20; }
                else { card.classList.add('deep'); card.style.zIndex = 10; }
            }
            const belowCaption = document.getElementById('trainBelowCaption');
            if (belowCaption) { belowCaption.style.display = 'block'; belowCaption.textContent = captions[activeIndex] || ''; }
        }
        applyStackClasses(current);

        lightboxClose.addEventListener('click', () => {
            lightbox.style.display = 'none';
            startCycle();
        });
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                lightbox.style.display = 'none';
                startCycle();
            }
        });

        function performTransition(fromIdx, toIdx, dir = 'next') {
            if (fromIdx === toIdx) return;
            const outgoing = cards[fromIdx];
            const incoming = cards[toIdx];
            if (dir === 'next') {
                incoming.classList.add('flip-initial'); incoming.style.zIndex = 25;
                requestAnimationFrame(() => {
                    outgoing.classList.add('flip-up'); incoming.classList.remove('flip-initial'); incoming.classList.add('flip-in');
                    setTimeout(() => { cards.forEach(c => c.classList.remove('flip-up', 'flip-initial', 'flip-in', 'flip-down', 'flip-in-rev')); current = toIdx; applyStackClasses(current); }, 780);
                });
            } else {
                incoming.classList.add('flip-initial'); incoming.style.zIndex = 25;
                requestAnimationFrame(() => {
                    outgoing.classList.add('flip-down'); incoming.classList.remove('flip-initial'); incoming.classList.add('flip-in-rev');
                    setTimeout(() => { cards.forEach(c => c.classList.remove('flip-up', 'flip-initial', 'flip-in', 'flip-down', 'flip-in-rev')); current = toIdx; applyStackClasses(current); }, 780);
                });
            }
        }

        function doFlip() { performTransition(current, (current + 1) % cards.length, 'next'); }
        function doPrevFlip() { performTransition(current, (current - 1 + cards.length) % cards.length, 'prev'); }

        let intervalMs = 3000;
        let cycleTimer = null;
        function startCycle() { if (cycleTimer) return; cycleTimer = setInterval(doFlip, intervalMs); }
        function stopCycle() { if (!cycleTimer) return; clearInterval(cycleTimer); cycleTimer = null; }
        setTimeout(() => startCycle(), 1500);

        trainArea.addEventListener('mouseenter', stopCycle);
        trainArea.addEventListener('mouseleave', startCycle);

        document.getElementById('trainPrev').addEventListener('click', (e) => { e.stopPropagation(); stopCycle(); doPrevFlip(); setTimeout(() => startCycle(), intervalMs + 200); });
        document.getElementById('trainNext').addEventListener('click', (e) => { e.stopPropagation(); stopCycle(); doFlip(); setTimeout(() => startCycle(), intervalMs + 200); });

        document.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight') { stopCycle(); doFlip(); setTimeout(() => startCycle(), intervalMs + 200); } else if (e.key === 'ArrowLeft') { stopCycle(); doPrevFlip(); setTimeout(() => startCycle(), intervalMs + 200); } });

    </script>
</body>

</html>
